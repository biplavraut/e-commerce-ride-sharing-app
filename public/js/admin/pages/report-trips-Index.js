(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{321:function(t,e,a){"use strict";a.r(e);var r=a(497),o=a(10),s=a(5);function i(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var l={name:"ReportIndex",data:function(){var t;return{topriders:[],webDataCounts:[],model:new r.a,from:"",to:"",filter_from:"",filter_to:"",filter:null!==(t=this.$route.params.filter)&&void 0!==t?t:"today",order_pie_data:[],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)"],trendingProductsData:[],rideRequestsFrom:[],rideRequestsTo:[]}},methods:{numberFormat:function(t,e){var a=new Intl.NumberFormat("en-IN",{style:"decimal",currency:e||"NPR"}).format(t);return a.includes("NaN")?"Rs "+t:"Rs "+a},filterData:function(t){this.from="",this.to="",this.filter=t,this.loadData()},tripDoughnutData:function(){$("#registeredTypeChart").remove(),$("#registered-doughnut-container").append('<canvas id="registeredTypeChart" width="100" height="100"><canvas>');var t=document.getElementById("registeredTypeChart");new Chart(t,{type:"bar",data:{datasets:[{label:this.filter.replace(/-/g," ").toUpperCase(),data:this.webDataCounts.vehicle_type,backgroundColor:this.backgroundColor,borderColor:this.borderColor,borderWidth:1}]},options:{parsing:{xAxisKey:"vehicle_type",yAxisKey:"total_vehicles"},responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1}}}})},paymentModeData:function(){$("#paymentModeChart").remove(),$("#payment-mode-bar-container").append('<canvas id="paymentModeChart" width="100" height="100"><canvas>');var t=document.getElementById("paymentModeChart");new Chart(t,{type:"bar",data:{datasets:[{label:this.filter.replace(/-/g," ").toUpperCase(),data:this.webDataCounts.payment_mode,backgroundColor:this.backgroundColor,borderColor:this.borderColor,borderWidth:1}]},options:{parsing:{xAxisKey:"payment_mode",yAxisKey:"paid_total"},responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1}}}})},tripStatusRaderData:function(){$("#tripStatusChart").remove(),$("#trip-status-radar-container").append('<canvas id="tripStatusChart" width="100" height="100"><canvas>');var t=document.getElementById("tripStatusChart");new Chart(t,{type:"bar",data:{datasets:[{label:this.filter.replace(/-/g," ").toUpperCase(),data:this.webDataCounts.trips_status,backgroundColor:this.backgroundColor,borderColor:this.borderColor,borderWidth:1}]},options:{parsing:{xAxisKey:"status",yAxisKey:"status_total"},responsive:!0,plugins:{legend:{position:"bottom"},title:{display:!1}}}})},reloadCounts:function(t){t.target.classList.add("fa-spin"),location.href=s.X},listItems:function(){this.topriders=this.webDataCounts.top_riders,this.rideRequestsFrom=this.webDataCounts.from_markers,this.rideRequestsTo=this.webDataCounts.to_markers;var t={lat:27.733697229707158,lng:85.34125707301315},e=new google.maps.Map(document.getElementById("myMapFrom"),{zoom:8,center:t});this.setMarkersFrom(e);var a=new google.maps.Map(document.getElementById("myMapTo"),{zoom:8,center:t});this.setMarkersTo(a)},checkDate:function(){var t=this;if(""!=this.from&&""!=this.to){this.filter="custom",this.filter_from=this.from,this.filter_to=this.to;axios.get(this.model.indexUrl+"/trip-report?q=custom&from="+this.from+"&to="+this.to).then((function(e){t.webDataCounts=e.data.data,t.order_pie_data=[t.webDataCounts.orders,t.webDataCounts.delivered,t.webDataCounts.takeaway,t.webDataCounts.settled],t.trendingProductsData=t.webDataCounts.top_products,t.tripDoughnutData(),t.paymentModeData(),t.tripStatusRaderData(),t.listItems()}))}},loadData:function(){var t=this,e=this.filter;axios.get(this.model.indexUrl+"/trip-report?q="+e).then((function(e){t.webDataCounts=e.data.data,t.order_pie_data=[t.webDataCounts.orders,t.webDataCounts.delivered,t.webDataCounts.takeaway,t.webDataCounts.settled],t.trendingProductsData=t.webDataCounts.top_products,t.tripDoughnutData(),t.paymentModeData(),t.tripStatusRaderData(),t.listItems()}))},setMarkersFrom:function(t){for(var e={url:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",size:new google.maps.Size(20,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,32)},a={coords:[1,1,1,20,18,20,18,1],type:"poly"},r=0;r<this.rideRequestsFrom.length;r++){var o=this.rideRequestsFrom[r];new google.maps.Marker({position:{lat:parseFloat(o.from_lat),lng:parseFloat(o.from_long)},map:t,icon:e,shape:a,title:o.from,zIndex:r+1})}},setMarkersTo:function(t){for(var e={url:"https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",size:new google.maps.Size(20,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,32)},a={coords:[1,1,1,20,18,20,18,1],type:"poly"},r=0;r<this.rideRequestsTo.length;r++){var o=this.rideRequestsTo[r];new google.maps.Marker({position:{lat:parseFloat(o.to_lat),lng:parseFloat(o.to_long)},map:t,icon:e,shape:a,title:o.to,zIndex:r+1})}}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?i(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(o.mapGetters)(["homePageCounts","authUser"])),mounted:function(){this.$route.params[0]&&alertMessage("404, Page not found !!!","danger")},created:function(){this.loadData()}},c=a(1),p=Object(c.a)(l,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{"margin-bottom":"10px",display:"flex"}},[a("ul",{staticClass:"nav nav-pills nav-pills-warning"},[a("li",{class:"today"===t.filter?"active":"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return t.filterData("today")}}},[t._v("Today ")])]),t._v(" "),a("li",{class:"yesterday"===t.filter?"active":"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return t.filterData("yesterday")}}},[t._v("Yesterday ")])]),t._v(" "),a("li",{class:"this-week"===t.filter?"active":"nav-item"},[a("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(e){return t.filterData("this-week")}}},[t._v("This Week ")])]),t._v(" "),a("li",{class:"this-month"===t.filter?"active":"nav-item"},[a("a",{attrs:{"aria-current":"true",href:"#"},on:{click:function(e){return t.filterData("this-month")}}},[t._v("This Month ")])]),t._v(" "),a("li",{class:"custom"===t.filter?"active":"nav-item"},[a("a",{attrs:{"aria-current":"true",href:"#","aria-disabled":"disabled",title:"Please Select Date"}},[t._v("Custom ")])])]),t._v(" "),a("div",{staticClass:"input-group"},[t._m(0),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.from,expression:"from"}],staticClass:"form-control",attrs:{type:"date",id:"datetimepicker6","aria-describedby":"basic-addon1"},domProps:{value:t.from},on:{input:[function(e){e.target.composing||(t.from=e.target.value)},t.checkDate]}})]),t._v(" "),a("div",{staticClass:"input-group"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.to,expression:"to"}],staticClass:"form-control",attrs:{type:"date",id:"datetimepicker7","aria-describedby":"basic-addon2"},domProps:{value:t.to},on:{input:[function(e){e.target.composing||(t.to=e.target.value)},t.checkDate]}})])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-8"},[a("div",{staticClass:"col"},["support"!==t.authUser.type&&"officer"!==t.authUser.type?a("app-card",{attrs:{title:"Top Riders"}},[a("ul",{staticClass:"list-group-flush list-group"},t._l(t.topriders,(function(e){return a("li",{key:e.driver_id,staticClass:"list-group-item d-flex justify-content-between align-items-center list-group-item-action",attrs:{waves:""}},[a("span",[t._v(t._s(e.driver.first_name+" "+e.driver.last_name))]),t._v(" "),a("span",{staticClass:"badge badge-pill"},[t._v("\n                "+t._s(t.numberFormat(e.trip_total))+"\n              ")]),t._v(" "),a("span",{staticClass:"badge badge-pill"},[t._v("\n                "+t._s(e.trips)+" trips\n              ")])])})),0)]):t._e()],1),t._v(" "),a("div",{staticClass:"col"},["support"!==t.authUser.type&&"officer"!==t.authUser.type?a("app-card",{attrs:{title:"Ride Request From Location Marker"}},[a("div",{staticClass:"z-depth-1-half map-container",staticStyle:{height:"300px"},attrs:{id:"myMapFrom"}})]):t._e()],1),t._v(" "),a("div",{staticClass:"col"},["support"!==t.authUser.type&&"officer"!==t.authUser.type?a("app-card",{attrs:{title:"Ride Request To Location Marker"}},[a("div",{staticClass:"z-depth-1-half map-container",staticStyle:{height:"300px"},attrs:{id:"myMapTo"}})]):t._e()],1)]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"col"},["support"!==t.authUser.type&&"officer"!==t.authUser.type?a("app-card",{attrs:{title:"Requested Vehicle Type ",width:"400",height:"400"}},[a("div",{attrs:{id:"registered-doughnut-container"}},[a("canvas",{attrs:{id:"registeredTypeChart"}})])]):t._e()],1),t._v(" "),a("div",{staticClass:"col"},["support"!==t.authUser.type&&"officer"!==t.authUser.type?a("app-card",{attrs:{title:"Trip Status"}},[a("div",{attrs:{id:"trip-status-radar-container"}},[a("canvas",{attrs:{id:"tripStatusChart"}})])]):t._e()],1),t._v(" "),a("div",{staticClass:"col"},["support"!==t.authUser.type&&"officer"!==t.authUser.type?a("app-card",{attrs:{title:"Preferred Payment Mode"}},[a("div",{attrs:{id:"payment-mode-bar-container"}},[a("canvas",{attrs:{id:"paymentModeChart"}})])]):t._e()],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-addon",attrs:{id:"date-addon1"}},[e("strong",[this._v("From")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-addon",attrs:{id:"date-addon2"}},[e("strong",[this._v("To")])])}],!1,null,null,null);e.default=p.exports},497:function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));var r=a(6),o=a(5);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=c(t);if(e){var o=c(this).constructor;a=Reflect.construct(r,arguments,o)}else a=r.apply(this,arguments);return l(this,a)}}function l(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(a,t);var e=n(a);function a(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=e.call(this,t)).indexUrl=o.X,r.namePlural="reports",r.nameLowerCase="report",r}return a}(r.a)}}]);