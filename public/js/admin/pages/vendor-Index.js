(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{358:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),i=a(3),r=a(18),o=a(11),d=a(4),l=a(10);function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function u(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function v(t,e,a,s,n,i,r){try{var o=t[i](r),d=o.value}catch(t){return void a(t)}o.done?e(d):Promise.resolve(d).then(s,n)}function m(t){return function(){var e=this,a=arguments;return new Promise((function(s,n){var i=t.apply(e,a);function r(t){v(i,s,n,r,o,"next",t)}function o(t){v(i,s,n,r,o,"throw",t)}r(void 0)}))}}var f={components:{Checkbox:a(323).default},name:"VendorIndex",mixins:[d.b,d.a],data:function(){return{columns:["#","Logo","Business","Full Name","Contact","Address","Services","Products","Added On"],rows:{data:[],links:{},meta:{}},model:new r.a,service:new o.a,serviceId:[],settlement:"30",tos:[{id:"7",name:"Weekly"},{id:"15",name:"Semi-Monthly"},{id:"30",name:"Monthly"}],vendor:"",services:[],allCount:0,form:new i.a({vendor_id:"",vendor_business_name:"",amount:"",remarks:""}),addfund:!1,catData:"all",hidden:!1,isInActive:!1}},methods:{serviceChange:function(t){if(this.serviceId.includes(t)){var e=this.serviceId.indexOf(t);e>-1&&this.serviceId.splice(e,1)}else this.serviceId.push(t)},selectedService:function(t){var e,a,s=null!==(e=this.vendor.serviceSlug)&&void 0!==e?e:[],n=null!==(a=this.vendor.type)&&void 0!==a?a:"";if(s.indexOf(t)>=0||n==t)return!0},exportSheet:function(){confirm("Are you sure?")&&(window.location=this.model.indexUrl+"/excel-export")},hideVendor:function(t){var e=this;confirm("Are you sure want to process this action")&&axios.get("/admin/vendor/action/"+t).then((function(t){alertMessage("Action performed successfully"),e.reset()}))},disableVendor:function(t){var e=this;confirm("Are you sure want to process this action")&&axios.get("/admin/vendor/disable/"+t).then((function(t){alertMessage("Action performed successfully"),e.reset()}))},formatDate:function(t){return moment(t).format("LLLL")},chooseService:function(t){this.vendor=t},verifyNow:function(){var t=this;return m(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.serviceId.length>0)){e.next=7;break}return e.next=3,t.model.verify(t.vendor.id,t.serviceId,t.settlement);case 3:"success"===(a=e.sent)?(t.vendor.verified=!0,alertMessage("Vendor Verified"),$("#info").modal().click(),t.reset()):(alertMessage(a,"danger"),$("#info").modal().click()),e.next=8;break;case 7:alertMessage("Please select service(s) to verify.","danger");case 8:case"end":return e.stop()}}),e)})))()},getServices:function(){var t=this;return m(n.a.mark((function e(){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.service.getAll();case 2:a=e.sent,t.services=a.data.map((function(t){return{id:t.id,name:t.name,slug:t.slug,count:t.count}}));case 4:case"end":return e.stop()}}),e)})))()},allData:function(){this.catData="all",this.reset()},reset:function(){var t=this;"admin"!==this.authUser.type&&"superadmin"!==this.authUser.type||("all"==this.catData?axios.get("/admin/vendor?isHidden="+this.hidden+"&isInActive="+this.isInActive).then((function(e){t.rows={data:[],links:{},meta:{}},t.rows.data=e.data.data,t.rows.links=e.data.links,t.rows.meta=e.data.meta})):this.fetchCategoryData(this.catData))},fetchCategoryData:function(t){var e=this;return m(n.a.mark((function a(){var s;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.catData=t,a.next=3,e.model.getData(t,e.hidden,e.isInActive);case 3:s=a.sent,e.rows={data:[],links:{},meta:{}},e.rows.data=s.data,e.rows.links=s.links,e.rows.meta=s.meta;case 8:case"end":return a.stop()}}),a)})))()},copy:function(t){copyContent(t)},addMoreFund:function(t,e){this.addfund=!0,this.form.reset(),this.form.vendor_id=t,this.form.vendor_business_name=e;var a=$("#addNewModel").modal();a.find(".modal-title").text("Add Advance Settlement Fund"),a.find(".modal-body #amount").attr("disabled",!1),a.find(".modal-body #vendor_business_name").attr("disabled","disabled"),a.show()},addFundData:function(){var t=this;swal({title:"Are you sure?",text:"Once Added, you will not be able to revert the amount!",icon:"warning",buttons:["Cancle!","Proceed!"],dangerMode:!0}).then((function(e){if(e){if(!(t.form.amount&&t.form.vendor_id&&t.form.remarks))throw swal("Invalid Input"),null;$("#modelClose").click(),t.form.post("/admin/vendor-advance-settlement/add").then((function(e){e.status?(alertMessage(e.message),t.form.reset()):alertMessage("Action cannot be processed.","danger")})),swal.stopLoading(),swal.close()}}))},showAddress:function(t){t&&swal("Full Address",t)}},mounted:function(){var t=this;"admin"!==this.authUser.type&&"superadmin"!==this.authUser.type||(this.getModels(),this.getServices()),setTimeout((function(){t.allCount=t.rows.meta.total}),2e3)},watch:{},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){u(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(l.mapGetters)(["authUser"]))},p=(a(640),a(1)),b=Object(p.a)(f,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("app-card",{attrs:{title:"All <b>Vendors</b>","body-padding":"0"}},[a("template",{slot:"actions"},[a("app-btn-link",{attrs:{"route-name":"vendor.create"}},[t._v("Add New")])],1),t._v(" "),"admin"===this.authUser.type||"superadmin"===this.authUser.type?a("ul",{staticClass:"nav nav-pills nav-pills-warning",staticStyle:{padding:"5px"}},[a("li",{staticClass:"active",on:{click:function(e){return e.preventDefault(),t.allData(e)}}},[a("a",{attrs:{href:"#all","data-toggle":"tab","aria-expanded":"true"}},[t._v("All "),a("span",{staticClass:"badge"},[t._v(t._s(t.allCount))])])]),t._v(" "),t._l(t.services,(function(e,s){return a("li",{key:s,on:{click:function(a){return a.preventDefault(),t.fetchCategoryData(e.id)}}},[a("a",{attrs:{href:"#"+e.slug,"data-toggle":"tab","aria-expanded":"true"}},[t._v(t._s(e.name)+"\n          "),a("sup",[a("span",{staticClass:"badge"},[t._v(t._s(e.count))])])])])})),t._v(" "),a("li",{staticClass:"pull-right",staticStyle:{display:"flex"}},[a("input-checkbox",{attrs:{label:"Hidden Only"},on:{change:t.reset},model:{value:t.hidden,callback:function(e){t.hidden=e},expression:"hidden"}}),t._v("   \n        "),a("input-checkbox",{attrs:{label:"Inactive Only"},on:{change:t.reset},model:{value:t.isInActive,callback:function(e){t.isInActive=e},expression:"isInActive"}}),t._v(" \n      ")],1)],2):t._e(),t._v(" "),a("app-table-sortable",{attrs:{columns:t.columns,rows:t.rows,searchUrl:"/admin/vendor/get-vendors?name="},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[a("td",[a("span",{staticClass:"badge",style:"app"===s.from?"background-color: blue":"background-color: green",attrs:{title:"Registered From"}},[t._v(t._s(s.from))]),a("br"),t._v(" "),a("span",{staticClass:"badge",staticStyle:{cursor:"pointer"},attrs:{title:"click to copy"},on:{click:function(e){return t.copy(s.vendorId)}}},[t._v(t._s(s.vendorId))]),t._v(" "),a("span",[a("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.addMoreFund(s.id,s.businessName)}}},[t._v("\n              Add Adv. Fund\n            ")])]),a("br"),t._v(" "),s.hide?a("span",{staticClass:"badge alert-primary",staticStyle:{background:"#de181890"}},[t._v("hidden")]):t._e(),t._v(" "),s.enable?t._e():a("span",{staticClass:"badge alert-primary",staticStyle:{background:"#de1818"}},[t._v("\n            Inactive\n          ")])]),t._v(" "),a("td",{attrs:{width:"100"}},[a("a",{attrs:{href:s.image,target:"_blank"}},[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:s.image50}})])]),t._v(" "),a("td",[t._v("\n          "+t._s(s.businessName)+"\n          "),a("br"),t._v(" "),s.verified?a("span",{staticClass:"btn btn-success btn-ajax",staticStyle:{cursor:"none"},attrs:{title:"Verified"}},[a("i",{staticClass:"material-icons"},[t._v("verified_user")])]):t._e()]),t._v(" "),a("td",[t._v(t._s(s.firstName)+" "+t._s(s.lastName))]),t._v(" "),a("td",[t._v("\n          "+t._s(s.email?s.email:"-")+"\n          "),s.emailVerified?a("small",{attrs:{title:"Verified"}},[a("span",[a("i",{staticClass:"material-icons"},[t._v("done")])])]):a("small",{attrs:{title:"Not Verified"}},[a("span",[a("i",{staticClass:"material-icons"},[t._v("close")])])]),t._v(" "),a("br"),t._v("\n          "+t._s(s.phone)+"\n          "),s.phoneVerified?a("small",{attrs:{title:"Verified"}},[a("span",[a("i",{staticClass:"material-icons"},[t._v("done")])])]):a("small",{attrs:{title:"Not Verified"}},[a("span",[a("i",{staticClass:"material-icons"},[t._v("close")])])])]),t._v(" "),a("td",{staticClass:"cursor",attrs:{title:s.address},on:{click:function(e){return t.showAddress(s.address)}}},[t._v("\n          "+t._s(s.address?s.address.substring(0,10)+"...":"-")+"\n        ")]),t._v(" "),a("td",t._l(s.serviceList,(function(e,s){return a("span",{key:s,staticClass:"badge"},[t._v(t._s(e))])})),0),t._v(" "),a("td",{attrs:{title:"Total Products"}},[a("router-link",{attrs:{to:{name:"product.index",params:{phone:s.phone}},title:"Click to go"}},[a("span",{staticClass:"badge cursor"},[t._v(t._s(s.products))])])],1),t._v(" "),a("td",[t._v(t._s(t.formatDate(s.createdAt)))]),t._v(" "),"admin"===t.authUser.type||"superadmin"===t.authUser.type?a("td",[s.verified?t._e():a("div",{staticClass:"col-md-3"},[a("button",{staticClass:"btn btn-warning btn-ajax",attrs:{type:"button",title:"Verify Now","data-toggle":"modal","data-target":"#info"},on:{click:function(e){return t.chooseService(s)}}},[a("i",{staticClass:"material-icons"},[t._v("done")])])]),t._v(" "),s.verified?a("div",{staticClass:"col-md-3"},[a("app-actions",{attrs:{actions:{edit:{name:"vendor.edit",params:{id:s.id}}}}})],1):t._e(),t._v(" "),a("div",{staticClass:"col-md-9"},[a("div",{class:s.verified?"col-md-4":"col-md-9"},[a("app-actions",{attrs:{actions:{delete:s.id}},on:{deleteItem:t.deleteModel}})],1),t._v(" "),s.verified?a("div",{staticClass:"col-md-4"},[a("button",{staticClass:"btn",class:s.enable?"btn-danger btn-ajax btn-link":"btn-default btn-ajax btn-link",attrs:{title:"Enable/Disable vendor with product"},on:{click:function(e){return t.disableVendor(s.id)}}},[a("i",{staticClass:"fa fa-ban"})])]):t._e(),t._v(" "),s.verified?a("div",{staticClass:"col-md-4"},[a("button",{staticClass:"btn",class:s.hide?"btn-success btn-ajax btn-link":"btn-warning btn-ajax btn-link",attrs:{title:"Hide/Unhide"},on:{click:function(e){return t.hideVendor(s.id)}}},[a("i",{staticClass:"material-icons"},[t._v("\n                  "+t._s(s.hide?"visibility":"visibility_off")+"\n                ")])])]):t._e()])]):a("td",[t._v("-")])]}}])}),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"info",role:"dialog"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n              ×\n            ")]),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v("Choose Services for this vendor")])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.verifyNow(e)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},t._l(t.services,(function(e,s){return a("div",{key:s,staticClass:"col-md-4"},[a("label",[a("input",{attrs:{type:"checkbox",name:"checkbox"},domProps:{checked:t.selectedService(e.slug)},on:{change:function(a){return t.serviceChange(e.id)}}}),t._v("\n                      "+t._s(e.name)+"\n                    ")])])})),0),t._v(" "),a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group asdh-select",attrs:{name:"role"}},[a("label",[t._v("Settlement Mode")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.settlement,expression:"settlement"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.settlement=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:""}},[t._v("Select mode")]),t._v(" "),t._l(t.tos,(function(e,s){return a("option",{key:s,attrs:{"data-tokens":""},domProps:{value:e.id}},[t._v("\n                        "+t._s(e.name.toUpperCase())+"\n                      ")])}))],2)])]),t._v(" "),a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"pull-right btn btn-success",attrs:{type:"submit",disabled:t.errors.any()}},[t._v("\n                    Verify\n                  ")])])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n              Close\n            ")])])])])])],2),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"addNewModel",tabindex:"-1",role:"dialog","aria-labelledby":"addNewModelModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),t._v(" "),a("div",{staticClass:"modal-body"},[a("form",[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"vendor_title"}},[t._v("Vendor*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vendor_business_name,expression:"form.vendor_business_name"}],staticClass:"form-control",attrs:{type:"text",id:"vendor_business_name",required:""},domProps:{value:t.form.vendor_business_name},on:{input:function(e){e.target.composing||t.$set(t.form,"vendor_business_name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"amount"}},[t._v("Amount*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.amount,expression:"form.amount"}],staticClass:"form-control",attrs:{type:"number",id:"amount",min:"0",required:""},domProps:{value:t.form.amount},on:{input:function(e){e.target.composing||t.$set(t.form,"amount",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"col-form-label",attrs:{for:"remarks"}},[t._v("Remarks*")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.remarks,expression:"form.remarks"}],staticClass:"form-control",attrs:{type:"text",id:"remarks",required:""},domProps:{value:t.form.remarks},on:{input:function(e){e.target.composing||t.$set(t.form,"remarks",e.target.value)}}})])])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.vendor_id,expression:"form.vendor_id"}],attrs:{type:"hidden",id:"vendor-id",name:"vendor_id",value:""},domProps:{value:t.form.vendor_id},on:{input:function(e){e.target.composing||t.$set(t.form,"vendor_id",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            Cancle\n          ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.addFundData()}}},[t._v("\n            Save\n          ")])])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button",id:"modelClose","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])]),this._v(" "),e("h5",{staticClass:"modal-title",attrs:{id:"addNewModelModalLabel"}})])}],!1,null,"e977205e",null);e.default=b.exports},549:function(t,e,a){var s=a(641);"string"==typeof s&&(s=[[t.i,s,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(9)(s,n);s.locals&&(t.exports=s.locals)},640:function(t,e,a){"use strict";var s=a(549);a.n(s).a},641:function(t,e,a){(t.exports=a(8)(!1)).push([t.i,"\n.cursor[data-v-e977205e] {\n  cursor: pointer;\n}\n",""])}}]);