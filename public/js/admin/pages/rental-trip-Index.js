(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{294:function(t,e,r){"use strict";r.r(e);var n=r(0),a=r.n(n),o=r(6),i=r(5),s=r(7);function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=m(t);if(e){var a=m(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f(this,r)}}function f(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&d(t,e)}(o,t);var e,r,n,a=u(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this,t)).indexUrl=i.W,e.namePlural="rental-trips",e}return e=o,(r=[{key:"getTrips",value:function(t){return s.a.get(this.indexUrl+"/get-trip?name="+t)}},{key:"getRiders",value:function(){return s.a.get(this.indexUrl+"/get-rider")}}])&&c(e.prototype,r),n&&c(e,n),o}(o.a),v=r(4);function _(t,e,r,n,a,o,i){try{var s=t[o](i),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,a)}var h={name:"RentalTripIndex",mixins:[v.b,v.a],data:function(){return{columns:["User","Driver","Package","Vehicle","Status","Start Time","End Time","Completed At","Booked On"],rows:{data:[],links:{},meta:{}},model:new p,riders:[],currentRow:"",riderId:""}},methods:{formatDate:function(t){return moment(t).format("LLLL")},formatBookedDate:function(t){return moment(t).format("LL")},reset:function(){var t=this;axios.get("/admin/rental-trip").then((function(e){t.rows.data=e.data.data}))},getRiders:function(){var t,e=this;return(t=a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.model.getRiders();case 2:r=t.sent,e.riders=r.data.map((function(t){return{id:t.id,name:t.name+" ("+t.address+")",phone:t.phone,email:t.email}}));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(t){_(o,n,a,i,s,"next",t)}function s(t){_(o,n,a,i,s,"throw",t)}i(void 0)}))})()},riderSelection:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?this.currentRow=e:axios.post("/admin/rental-trip/update-rider",{tripId:this.currentRow.id,rider:this.riderId}).then((function(e){t.currentRow="",t.riderId="",t.reset(),alertMessage("Rider has been set."),$("#info").modal().click()}))}},mounted:function(){this.getModels(),this.getRiders()},created:function(){},watch:{}},b=(r(558),r(1)),y=Object(b.a)(h,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("app-card",{attrs:{title:"All <b>Rental Trips</b>","body-padding":"0"}},[r("app-table-sortable",{attrs:{columns:t.columns,paginate:!0,rows:t.rows,searchUrl:"/admin/rental-trip/get-trip?name="},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("td",{attrs:{title:n.user.country_code+" "+n.user.phone}},[r("small",[t._v(t._s(n.user.first_name)+" "+t._s(n.user.last_name)+"\n          "),r("small",[t._v("("+t._s(n.user.phone)+")")])])]),t._v(" "),r("td",[n.driver?r("small",{attrs:{title:n.driver.country_code+" "+n.driver.phone}},[t._v("\n          "+t._s(n.driver.name)+"\n          "),r("small",[t._v("("+t._s(n.driver.phone)+")")])]):r("small",[r("a",{attrs:{"data-toggle":"modal","data-target":"#info",title:"Set the rider"},on:{click:function(e){return e.preventDefault(),t.riderSelection(n)}}},[r("i",{staticClass:"material-icons"},[t._v("local_taxi")])])])]),t._v(" "),r("td",[r("small",[t._v(t._s(n.package.name)+" "),r("br"),t._v("("+t._s(n.package.duration)+"hr\n          "+t._s(n.package.distance)+"km)")])]),t._v(" "),r("td",[t._v("\n        "+t._s(n.vehicle)+"\n        "),r("small",{attrs:{title:"Total Rental Cost"}},[t._v("(Rs."+t._s(n.price)+")")])]),t._v(" "),r("td",[t._v(t._s(n.status))]),t._v(" "),r("td",[r("small",[t._v(t._s(t.formatDate(n.startsAt)))])]),t._v(" "),r("td",[r("small",[t._v(t._s(t.formatDate(n.endsAt)))])]),t._v(" "),r("td",["completed"===n.status?r("small",[t._v("\n          "+t._s(t.formatDate(n.completedAt))+"\n          "),"Exact Time"!==n.timeCalculation?r("code",[r("span",{staticClass:"badge"},[t._v(t._s(n.timeCalculation))])]):t._e()]):r("small",[t._v("-")])]),t._v(" "),r("td",[r("small",{attrs:{title:t.formatDate(n.createdAt)}},[t._v(t._s(t.formatBookedDate(n.createdAt)))])]),t._v(" "),r("td",{attrs:{width:"50"}},[r("app-actions",{attrs:{actions:{delete:n.id}},on:{deleteItem:t.deleteModel}})],1)]}}])}),t._v(" "),r("div",{staticClass:"modal fade",attrs:{id:"info",role:"dialog"}},[r("div",{staticClass:"modal-dialog"},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            Ã—\n          ")]),t._v(" "),r("h4",{staticClass:"modal-title"},[t._v("Choose Rider/Captain")])]),t._v(" "),r("div",{staticClass:"modal-body"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.riderSelection()}}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12"},[r("input-select",{attrs:{name:"rider",label:"Rider",options:t.riders},model:{value:t.riderId,callback:function(e){t.riderId=e},expression:"riderId"}}),t._v(" "),t.errors.any("rider")?r("small",{staticClass:"text-center text-danger"},[t._v("* "+t._s(t.errors.first("rider")))]):t._e(),t._v(" "),r("button",{staticClass:"pull-right btn btn-success",attrs:{type:"submit",disabled:t.errors.any()}},[t._v("\n                  Update\n                ")])],1)])])]),t._v(" "),r("div",{staticClass:"modal-footer"},[r("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            Close\n          ")])])])])])],1)}),[],!1,null,"ae3c3f52",null);e.default=y.exports},508:function(t,e,r){var n=r(559);"string"==typeof n&&(n=[[t.i,n,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};r(9)(n,a);n.locals&&(t.exports=n.locals)},558:function(t,e,r){"use strict";var n=r(508);r.n(n).a},559:function(t,e,r){(t.exports=r(8)(!1)).push([t.i,"\n.card-title[data-v-ae3c3f52] {\n  padding: 10px 15px;\n  margin: 0;\n  font-weight: 400;\n  /* background-color : #337AB7; */\n  color: #666666;\n}\n",""])}}]);