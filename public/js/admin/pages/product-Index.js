(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{344:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(30),s=a(4),o=a(10);function c(t,e,a,n,r,i,s){try{var o=t[i](s),c=o.value}catch(t){return void a(t)}o.done?e(c):Promise.resolve(c).then(n,r)}function l(t){return function(){var e=this,a=arguments;return new Promise((function(n,r){var i=t.apply(e,a);function s(t){c(i,n,r,s,o,"next",t)}function o(t){c(i,n,r,s,o,"throw",t)}s(void 0)}))}}function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){p(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function p(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var m={name:"ProductIndex",mixins:[s.b,s.a],data:function(){var t;return p(t={active:"",columns:["Image","Title","Category","Vendor","Price"],rows:{data:[],links:{},meta:{}},model:new i.a,file:"",type:"",keyword:"",filteringProduct:[],isLoading:!1,multiple:[]},"keyword",""),p(t,"updateProductList",[]),p(t,"updateCount",0),p(t,"updateEnable",!1),t},methods:u(u({},Object(o.mapMutations)(["updateThisMonthProductsCount"])),{},{exportSheet:function(){confirm("Are you sure?")&&(window.location=this.model.indexUrl+"/excel-export")},submitFile:function(){var t=new FormData;if(t.append("import_file",this.file),t.append("type",this.type),this.file){var e=new FileReader;e.onload=function(t){var e=t.target.result,a=XLSX.read(e,{type:"binary"});a.SheetNames.forEach((function(t){var e=XLSX.utils.sheet_to_row_object_array(a.Sheets[t]),n=JSON.stringify(e),r=JSON.parse(n);r.length>0&&axios.post("/admin/product/excel-import",{data:r}).then((function(t){"success"==t.data.message?(swal({title:"Good Job!",text:"File has been imported successfully.",icon:"success"}),location.reload()):swal({title:"Awww!",text:t.data.message,icon:"error"})})).catch((function(){console.log("FAILURE!!"),swal({title:"Awww!",text:"File cannot be imported.",icon:"error"})}))}))},e.readAsBinaryString(this.file),this.otherFields()}else alertMessage("Please select excel file to import.","danger")},otherFields:function(){$("#import").modal("hide"),this.getModels()},handleFileUpload:function(){this.file=this.$refs.file.files[0]},downloadSample:function(){var t=window.location.origin+"/dashboard/excel-samples/";location.href=t+"Product Import.xlsx"},verifyProduct:function(t){var e=this;return l(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.model.verify(t.id);case 2:"success"===(n=a.sent)?(t.verified=!0,e.rows.data.splice(e.rows.data.indexOf(t),1),alertMessage("Product Verified")):alertMessage(n,"danger");case 4:case"end":return a.stop()}}),a)})))()},addToVerifyList:function(t){this.multiple.includes(t)?this.multiple=this.multiple.filter((function(e){return e!==t})):this.multiple.push(t)},verifyAll:function(){var t=this;return l(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.model.verifyMultiple(t.multiple);case 2:"success"===e.sent&&(t.rows={data:[],links:{},meta:{}},t.multiple=[],t.reset(),alertMessage("Products Verified"));case 4:case"end":return e.stop()}}),e)})))()},reset:function(){var t=this;return l(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.updateEnable=!1,t.active="",e.next=4,t.model.reset();case 4:a=e.sent,t.rows={data:[],links:{},meta:{}},t.rows.data=a.data,t.rows.links=a.links,t.rows.meta=a.meta;case 9:case"end":return e.stop()}}),e)})))()},verifiedOnly:function(){var t=this;return l(r.a.mark((function e(){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.active="verified",t.updateEnable=!1,e.next=4,t.model.verifiedProducts();case 4:a=e.sent,t.rows={data:[],links:{},meta:{}},t.rows.data=a.data,t.rows.links=a.links,t.rows.meta=a.meta;case 9:case"end":return e.stop()}}),e)})))()},copy:function(t){var e=document.createElement("textarea");document.body.appendChild(e),e.value=t,e.select(),document.execCommand("copy"),document.body.removeChild(e),alertMessage("Title copied to clipboard.")},updateList:function(){var t=this;axios.get(this.model.indexUrl+"/update-list").then((function(e){t.updateProductList=e.data,t.updateCount=e.data.meta.total}))},updateDataList:function(){this.updateEnable=!0,this.active="approve",this.rows={data:[],links:{},meta:{}},this.rows.data=this.updateProductList.data,this.rows.links=this.updateProductList.links,this.rows.meta=this.updateProductList.meta}}),mounted:function(){},computed:u({},Object(o.mapGetters)(["authUser"])),created:function(){this.$route.params.phone?this.keyword=this.$route.params.phone:(this.getModels(),this.updateList())},watch:{}},v=(a(626),a(1)),f=Object(v.a)(m,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("app-card",{attrs:{title:"All <b>Products</b> need to Verify","body-padding":"0"}},[a("button",{staticClass:"btn btn-round btn-xs title-right-action",style:t.active?"":"background-color:green;",attrs:{title:"Refresh"},on:{click:t.reset}},[a("i",{staticClass:"material-icons"},[t._v("refresh")]),t._v("\n    Unverified Only\n  ")]),t._v(" "),a("button",{staticClass:"btn btn-round btn-xs title-right-action",style:"verified"===t.active?"background-color:green;":"",attrs:{title:"Verified Only"},on:{click:t.verifiedOnly}},[a("i",{staticClass:"material-icons"},[t._v("done_all")]),t._v("\n    Verified Only\n  ")]),t._v(" "),a("button",{staticClass:"btn btn-round btn-xs title-right-action",style:"approve"===t.active?"background-color:green;":"",attrs:{title:"Product Update Compare"},on:{click:t.updateDataList}},[a("i",{staticClass:"material-icons"},[t._v("fact_check")]),t._v("\n    Edited Product Approval\n    "),a("sup",[a("span",{staticClass:"badge"},[t._v(t._s(t.updateCount))])])]),t._v(" "),t.updateEnable?t._e():a("template",{slot:"actions"},[a("app-btn-link",{attrs:{"route-name":"product.create"}},[t._v("Add New")])],1),t._v(" "),t.updateEnable?t._e():a("template",{slot:"actions"},[a("app-btn",{attrs:{background:"warning",icon:"cloud_upload","data-toggle":"modal","data-target":"#import"}},[t._v("Import Excel")])],1),t._v(" "),t.updateEnable?t._e():a("app-table-sortable",{attrs:{columns:t.columns,rows:t.rows,paginate:!0,searchUrl:"/admin/product/get-products?name=",word:t.keyword,searchHolder:"Search By (Product Title, Vendor Phone)"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("td",{attrs:{width:"100"}},[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:n.image50}})]),t._v(" "),a("td",{staticStyle:{cursor:"pointer"},attrs:{title:"Click to copy"},on:{click:function(e){return t.copy(n.title)}}},[t._v("\n        "+t._s(n.title)+"\n      ")]),t._v(" "),a("td",[t._v("\n        "+t._s(n.category.name)+" (\n        "),a("small",[t._v(t._s(n.subCategory?n.subCategory.name+" >> ":"")+"\n          "+t._s(n.subChildCategory?n.subChildCategory.name:""))]),t._v("\n        )\n      ")]),t._v(" "),a("td",[t._v("\n        "+t._s(n.vendor?n.vendor.business_name:"")+"\n        "),a("small",[t._v("("+t._s(n.vendor?n.vendor.phone:"")+")")])]),t._v(" "),a("td",[t._v(t._s(n.price))]),t._v(" "),a("td",[a("div",{staticClass:"col-md-3"},[n.verified?a("button",{staticClass:"btn btn-success btn-ajax",attrs:{type:"button",title:"Verified"}},[a("i",{staticClass:"material-icons"},[t._v("done_all")])]):a("button",{staticClass:"btn btn-warning btn-ajax",attrs:{type:"button",title:"Verify Now"},on:{click:function(e){return t.verifyProduct(n)}}},[a("i",{staticClass:"material-icons"},[t._v("done")])])]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("app-actions",{attrs:{actions:{edit:{name:"product.edit",params:{id:n.id}}}}})],1),t._v(" "),"admin"===t.authUser.type||"superadmin"===t.authUser.type||"unit-head"===t.authUser.type?a("div",{staticClass:"col-md-3"},[a("app-actions",{attrs:{actions:{delete:n.id}},on:{deleteItem:t.deleteModel}})],1):t._e(),t._v(" "),n.verified?t._e():a("div",{staticClass:"col-md-1"},[a("input-checkbox",{on:{click:function(e){return t.addToVerifyList(n.id)}}})],1)])]}}],null,!1,4192476138)}),t._v(" "),t.multiple.length>0?a("div",{staticClass:"col-md-12",staticStyle:{"margin-top":"-2%"},attrs:{title:"Check to verify"}},[a("app-btn",{attrs:{background:"warning",icon:"done_all"},on:{click:function(e){return e.preventDefault(),t.verifyAll(e)}}},[t._v("Verify Selected")])],1):t._e(),t._v(" "),t.updateEnable?a("app-table-sortable",{attrs:{columns:t.columns,rows:t.rows,paginate:!0},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[a("td",{attrs:{width:"100"}},[a("img",{staticStyle:{width:"50px",height:"50px","border-radius":"50%"},attrs:{src:n.product.image50}})]),t._v(" "),a("td",{staticStyle:{cursor:"pointer"},attrs:{title:"Click to copy"},on:{click:function(e){return t.copy(n.product.title)}}},[t._v("\n        "+t._s(n.product.title)+"\n      ")]),t._v(" "),a("td",[t._v("\n        "+t._s(n.product.category.name)+" (\n        "),a("small",[t._v(t._s(n.product.subCategory?n.product.subCategory.name+" >> ":"")+"\n          "+t._s(n.product.subChildCategory?n.product.subChildCategory.name:""))]),t._v("\n        )\n      ")]),t._v(" "),a("td",[t._v("\n        "+t._s(n.product.vendor.business_name)+"\n        "),a("small",[t._v("("+t._s(n.product.vendor.phone)+")")])]),t._v(" "),a("td",[t._v(t._s(n.product.price))]),t._v(" "),a("td",{attrs:{width:"100"}},[a("button",{staticClass:"btn btn-success btn-ajax",attrs:{type:"button"}},[a("router-link",{attrs:{to:{name:"product.compare",params:{idx:n.product.id}},title:"Click to compare"}},[a("i",{staticClass:"material-icons"},[t._v("fact_check")])])],1)])]}}],null,!1,533505706)}):t._e(),t._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"import",role:"dialog"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            ×\n          ")]),t._v(" "),a("h4",{staticClass:"modal-title"},[t._v("Import Product Excel")])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("input",{ref:"file",staticClass:"btn btn-secondary",attrs:{type:"file",id:"file",name:"import_file"},on:{change:function(e){return t.handleFileUpload()}}}),t._v(" "),a("button",{staticClass:"btn btn-round btn-primary",attrs:{type:"submit"},on:{click:function(e){return t.submitFile()}}},[t._v("\n            Import\n          ")]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-round btn-warning",attrs:{type:"button"},on:{click:function(e){return t.downloadSample()}}},[t._v("\n            Download Sample\n          ")])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-default",attrs:{type:"button","data-dismiss":"modal"}},[t._v("\n            Close\n          ")])])])])])],2)}),[],!1,null,"25ffe19a",null);e.default=f.exports},542:function(t,e,a){var n=a(627);"string"==typeof n&&(n=[[t.i,n,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(9)(n,r);n.locals&&(t.exports=n.locals)},626:function(t,e,a){"use strict";var n=a(542);a.n(n).a},627:function(t,e,a){(t.exports=a(8)(!1)).push([t.i,"\n.card-title[data-v-25ffe19a] {\n  padding: 10px 15px;\n  margin: 0;\n  font-weight: 400;\n  /* background-color : #337AB7; */\n  color: #666666;\n}\n",""])}}]);